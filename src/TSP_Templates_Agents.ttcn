module TSP_Templates_Agents {
    import from TSP_Types all;

    template Agent iperf3server(charstring cp, charstring dc) := {
        name := "server",
        connection_point := cp,
        image := "tsp-iperf3-ssh",
        datacenter := dc,
        cmd := "iperf3 -s"
    };

    template Agent iperf3client(charstring cp, charstring dc) := {
        name := "client",
        connection_point := cp,
        image := "tsp-iperf3-ssh",
        datacenter := dc,
        cmd := "iperf3 -t 5 -J -c ${VNF:IP4:server}",
        output_parser := "iperf3-json-bits_per_second"
    };

    template Agent iperf3client_udp(charstring cp, charstring dc) modifies iperf3client := {
        cmd := "iperf3 -b 100000M -u -t 5 -J -c ${VNF:IP4:server}"
    }

    template Agent wrk_client(charstring cp) := {
        name := "client",
        connection_point := cp,
        image := "tsp-wrk-ssh",
        datacenter := "dc1",
        cmd := "wrk http://192.168.0.0:80",
        output_parser := "wrk-requests"
    };
}
